"use strict";var app=angular.module("restaurantclientApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","angular-jwt","ui.bootstrap","ngMap","ngMaterial","ui.carousel"]);app.config(["$locationProvider",function(e){e.hashPrefix("")}]),app.config(["$httpProvider","jwtOptionsProvider",function(e,t){e.interceptors.push("jwtInterceptor"),t.config({whiteListedDomains:["http://localhost:8080/","localhost","https://ajdinsrestaurantsapp.herokuapp.com/"],tokenGetter:["options",function(e){return e&&".html"===e.url.substr(e.url.length-5)?null:window.localStorage.getItem("token")}]});firebase.initializeApp({apiKey:"AIzaSyDwQgbcwVYhXYBbXtsDsfhTRCMOTVKeO1I",authDomain:"restaurantreservation-2c-cc397.firebaseapp.com",databaseURL:"https://restaurantreservation-2c-cc397.firebaseio.com",projectId:"restaurantreservation-2ce49",storageBucket:"restaurantreservation-2ce49.appspot.com",messagingSenderId:"430376921913"})}]),app.config(["$routeProvider",function(e){e.when("/",{templateUrl:"views/home.html",controller:"HomeCtrl",controllerAs:"home"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/home",{templateUrl:"views/home.html",controller:"HomeCtrl",controllerAs:"home"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login"}).when("/register",{templateUrl:"views/register.html",controller:"RegisterCtrl",controllerAs:"register"}).when("/search/",{templateUrl:"views/search.html",controller:"SearchCtrl",controllerAs:"search"}).when("/search/:value?/guests/:guests?/date/:date?/time/:time?",{templateUrl:"views/search.html",controller:"SearchCtrl",controllerAs:"search"}).when("/restaurant",{templateUrl:"views/restaurant.html",controller:"RestaurantCtrl",controllerAs:"restaurant"}).when("/reservation",{templateUrl:"views/reservation.html",controller:"RestaurantCtrl",controllerAs:"reservation",date:{authorization:!0,redirectTo:"login"}}).when("/admin",{templateUrl:"views/admin.html",controller:"AdminCtrl",controllerAs:"admin"}).otherwise({redirectTo:"/"})}]),app.run(["$rootScope","$location","$http","$window","authManager",function(e,t,a,n,i){n.localStorage.getItem("token");i.checkAuthOnRefresh(),e.$on("$locationChangeStart",function(e,a,i){console.log("token  = ");var s=-1===t.path().indexOf("/login"),o=n.localStorage.getItem("token"),r=-1!==t.path().indexOf("/reservation");console.log("loggedIn:  = "+o),console.log("reservationPage"+r),s&&!o&&r&&t.path("/login")})}]),angular.module("restaurantclientApp").controller("HomeCtrl",["$scope","RestaurantService","SharedContext","$location","$rootScope",function(e,t,a,n,i){e.todayDate=new Date,e.reservation={nameRes:""},e.search=function(){var t={search:e.reservation.nameRes,guests:e.reservation.numGuests,date:e.reservation.date,time:e.reservation.time};i.place=t,a.removeData(),a.addData(t),n.path("/search/"+e.reservation.nameRes+"/guests/"+e.reservation.numGuests+"/date/"+e.reservation.date+"/time/"+e.reservation.time)}}]).controller("RestCtrl",["$scope","RestaurantService","$window",function(e,t,a){var n=this;e.$on("$routeChangeSuccess",function(){console.log("00Test"),t.getRandomRestaurants().then(function(t){var i=t.data.restaurants;e.restaurants=i,n.ratings=i.map(e=>e.votes.toString()),n.averageRating=i.map(e=>e.mark),n.ratingsPosition="right",n.formData={myRating:2},n.averageRatingDollar=i.map(e=>e.priceRange),n.ratingChange=function(){console.log("My rating changed to: "+n.formData.myRating)},e.viewRestaurant=function(e){a.localStorage.setItem("restaurant",JSON.stringify(i[e.target.parentElement.id])),a.location.href="#/restaurant"}})})}]).controller("fakeSpecialsCtrl",["$scope",function(e){e.getSecondIndex=function(e){return e-6>=0?e-6:e},e.$on("$routeChangeSuccess",function(){e.meals=[],e.meals.push({img:"https://cdn.pixabay.com/photo/2016/02/19/11/30/pizza-1209748_960_720.jpg",title:"Best Pizza of 2016",city:"New York",numRes:"43 restaurants"}),e.meals.push({img:"https://cdn.pixabay.com/photo/2017/01/20/19/12/chili-1995689_960_720.jpg",title:"Fresh & Spicy",city:"Philadelphia",numRes:"16 restaurants"}),e.meals.push({img:"https://cdn.pixabay.com/photo/2015/03/26/09/39/cupcakes-690040_960_720.jpg",title:"Cupcakes Flavor",city:"Chicago",numRes:"11 restaurants"}),e.meals.push({img:"https://cdn.pixabay.com/photo/2014/08/14/14/21/shish-kebab-417994_960_720.jpg",title:"Shish Kebab",city:"Madrid",numRes:"26 restaurants"}),e.meals.push({img:"https://cdn.pixabay.com/photo/2017/01/16/17/45/pancake-1984716_960_720.jpg",title:"Pancakes",city:"Moscow",numRes:"54 restaurants"}),e.meals.push({img:"https://cdn.pixabay.com/photo/2017/10/15/11/41/sushi-2853382_960_720.jpg",title:"Sushi",city:"Tokyo",numRes:"35 restaurants"})})}]).controller("LocationCtrl",["$scope","LocationService",function(e,t){e.$on("$routeChangeSuccess",function(){console.log("00Test"),t.getPopularLocations().then(function(t){e.locations=t.data,console.log(t)})})}]),angular.module("restaurantclientApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("restaurantclientApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("restaurantclientApp").controller("LoginCtrl",["$location","$http","$scope","$window","$rootScope","LoginService","authManager",function(e,t,a,n,i,s,o){a.credentials={email:"",pass:""},a.loginFun=function(){var e={email:a.credentials.email,password:a.credentials.pass};n.localStorage.setItem("token",""),o.unauthenticate(),s.login(e).then(function(e){console.log(e.status),n.localStorage.setItem("token",e.headers("authorization")),n.localStorage.setItem("userInfo",a.credentials.email);var t={email:a.credentials.email};s.isAdmin(t).then(function(e){i.isAdmin="admin"===e.data.userType,n.location.href="/#/home",o.authenticate()})}).catch(function(){a.error="Email or password is incorrect!"})}}]),angular.module("restaurantclientApp").controller("RegisterCtrl",["$window","$scope","RegisterService","LocationService",function(e,t,a,n){t.$on("$routeChangeSuccess",function(){console.log("test"),n.getCountries().then(function(e){var a=e.data;a.unshift({country:"Country",disabled:!0}),t.countries=a})}),t.registerFun=function(){var n={firstName:t.info.first,lastName:t.info.last,email:t.info.email,phoneNum:t.info.phone,country:t.info.country,city:t.info.city,password:t.info.pass};a.register(n).then(function(){e.location.href="/#/login"}).catch(function(){t.error="Email is already registered."})},t.updateCities=function(){var e={countryId:t.info.country};n.getCities(e).then(function(e){var a=e.data;t.cities=a})}}]),angular.module("restaurantclientApp").controller("SearchCtrl",["$scope","$window","$routeParams","RestaurantService","CousineService","SharedContext",function(e,t,a,n,i,s){e.reservation={nameRes:"",filter:""},e.filterCousine="",e.formData={priceRange:"",myRating:""},e.params={guests:"",date:"",time:""},e.notEmpty=!1,e.noFilter=!1,e.currentPage=1,$(".dropdown-menu").click(function(e){e.stopPropagation()}),document.getElementById("filter-cousine").onmousedown=function(e){e.preventDefault(),e.target.selected=!e.target.selected},i.getAllCousines().then(function(t){var a=t.data;e.cousines=a.map(e=>e.name.toString())});var o={},r=this;e.search=function(){for(var t=[],a=document.getElementById("filter-cousine").options,i=0;i<a.length;i++)a[i].selected&&t.push(a[i].value);var s={itemsPerPage:9,pageNumber:e.currentPage,searchText:e.reservation.nameRes,filterPrice:e.formData.priceRange,filterRating:e.formData.myRating,filterCousine:t.toString(),date:e.params.date,time:e.params.time,guests:e.params.guests};n.getSearchedRestaurants(s).then(function(t){o=t.data.restaurants;var a=t.data.numberOfRestaurantPages;Object.keys(o).length?(e.notEmpty=!0,e.restaurants=o,r.ratings=o.map(e=>e.votes.toString()),r.averageRating=o.map(e=>e.mark),r.ratingsPosition="right",r.formData={myRating:2},r.averageRatingDollar=o.map(e=>e.priceRange),e.numPerPage=9,e.numPages=a,e.totalItems=t.data.totalItems,e.maxSize=5):e.notEmpty=!1})},e.$on("$routeChangeSuccess",function(){if(a.value){s.getData();e.reservation.nameRes=a.value,e.params.guests=a.guests,e.params.date=s.getData().date,e.params.time=s.getData().time,e.noFilter=!0,e.search()}else e.reservation.nameRes="",e.reservation.filter="",e.search()}),e.searchHandler=function(){e.reservation.nameRes,e.currentPage=1,e.search()},e.pageChanged=function(){e.search()},e.viewRestaurant=function(e){t.localStorage.setItem("restaurant",JSON.stringify(o[e.target.parentElement.id])),t.location.href="#/restaurant"},e.closeAlert=function(){$root.place=null,t.location.href="#/search"}}]),angular.module("restaurantclientApp").controller("RestaurantCtrl",["$scope","$window","SharedContext","$uibModal","RestaurantService","$rootScope",function(e,t,a,n,i,s){var o=this,r=null;e.isCollapsed=!0,e.findTablesError=!1,e.heightMenu="100px",e.btnShowMenu="Show full menu",e.restaurant={restaurantName:"",description:"",latitude:"",longitude:"",mark:"",votes:"",priceRange:"",imageFileName:"",coverFileName:"",foodType:""},e.reservation={numGuests:"",time:"",date:""};var l=s.place;null!=l&&(e.reservation.numGuests=l.guests,e.reservation.time=l.time,e.reservation.date=l.date),e.$on("$routeChangeSuccess",function(){var a=JSON.parse(t.localStorage.getItem("restaurant"));r=a.id,e.restaurant=a,i.getExtraDetails(r).then(function(t){e.restaurant.description=t.data.description}),e.todayDate=new Date,o.ratings=a.votes,o.averageRating=a.mark,o.ratingsPosition="right",o.formData={myRating:2}}),e.review=function(){n.open({templateUrl:"rateRestaurant.html",controller:"modalInstanceCtrl"})},e.showMenu=function(){"100px"===e.heightMenu?(e.heightMenu="none",e.btnShowMenu="Show less"):(e.heightMenu="100px",e.btnShowMenu="Show full menu")},e.findTables=function(){var t={people:e.reservation.numGuests,date:e.reservation.date,hour:e.reservation.time,idRestaurant:r};t.people&&t.date&&t.hour?(e.findTablesError=!1,i.checkReservationAvailability(t).then(function(t){e.reservations=t.data.reservations,e.tablesLeft=t.data.reservations.tables.size()})):e.findTablesError=!0},e.confirmReservation=function(n){a.removeData();var i={numGuests:e.reservation.numGuests,time:n.bestTime,date:e.reservation.date,tables:n.tableIds,duration:n.duration};a.addData(i),t.location.href="#/reservation"}}]).controller("modalInstanceCtrl",["$scope","$rootScope","SharedContext","RestaurantService","$window",function(e,t,a,n,i){e.rateRestaurant=function(){var t=JSON.parse(i.localStorage.getItem("restaurant")).id,a={mark:e.formData.myRating,emailUser:i.localStorage.getItem("userInfo"),idRestaurant:t,comment:e.comment};n.rateRestaurant(a,i.localStorage.getItem("token")).then(function(e){var t=JSON.parse(i.localStorage.getItem("restaurant"));t.votes=e.data.ratings,t.mark=e.data.grade,i.localStorage.setItem("restaurant",JSON.stringify(t)),i.location.reload()})}}]),angular.module("restaurantclientApp").controller("ReservationCtrl",["$scope","SharedContext","$window","ReservationService",function(e,t,a,n){e.reservation={numGuests:"",time:"",date:""},e.restaurant={imageFileName:"",restaurantName:""},e.$on("$routeChangeSuccess",function(){e.reservation=t.getData(),console.log(e.reservation),e.restaurant.imageFileName=JSON.parse(a.localStorage.getItem("restaurant")).imageFileName,e.restaurant.restaurantName=JSON.parse(a.localStorage.getItem("restaurant")).restaurantName}),e.makeReservation=function(){var t={guests:e.reservation.numGuests,date:e.reservation.date,time:e.reservation.time,tables:e.reservation.tables,duration:e.reservation.duration,user:a.localStorage.getItem("userInfo"),idRestaurant:JSON.parse(a.localStorage.getItem("restaurant")).id};console.log(t.date.getDay());var i=a.localStorage.getItem("token");n.makeReservation(t,i).then(function(){a.location.href="#/restaurant"})}}]),angular.module("restaurantclientApp").controller("LogoutCtrl",["$window","authManager","$scope","$rootScope",function(e,t,a,n){a.logout=function(){e.localStorage.setItem("token",""),e.localStorage.setItem("userInfo",""),n.isAdmin=!1,t.unauthenticate()}}]),angular.module("restaurantclientApp").controller("AdminCtrl",["$scope","$rootScope",function(e,t){t.show=!1,e.btnValue=["restaurants","locations","categories","users"],e.addNewElement=function(a){console.log(a),e.activeTab=a,t.show=!1,t.edit=!1}}]).controller("AdminDashboardCtrl",["$scope","AdminService",function(e,t){t.getCounters().then(function(t){e.counter=t.data})}]).controller("AdminRestaurantsCtrl",["$scope","RestaurantService","$rootScope","FireService","LocationService","CousineService","AdminService",function(e,t,a,n,i,s,o){e.imageSrc={profile:null,cover:null},e.restaurantInfo={id:"",restaurantName:"",description:"",latitude:"",longitude:"",priceRange:"",imageFileName:"",coverFileName:"",foodType:"",city:""},a.show=!0,e.notEmpty=!1,e.currentPage=1,e.gmap={pos:[43.8563,18.4131],center:[43.8563,18.4131]},i.getCountries().then(function(t){var a=t.data;a.unshift({country:"Country",disabled:!0}),e.countries=a}),e.updateCities=function(){var t={countryId:e.restaurantInfo.country};i.getCities(t).then(function(t){var a=t.data;e.cities=a})},s.getAllCousines().then(function(t){e.cousines=t.data}),e.activeCategories=[],e.foodType=[],e.addCategory=function(t){var a=e.cousines.find(e=>e.id===t);console.log(t),-1===e.activeCategories.map(e=>e.id).indexOf(t)&&(e.activeCategories.push(a),e.foodType.push(t)),console.log(e.foodType)},e.deleteActiveCategory=function(t){e.activeCategories.splice(t,1),e.foodType.splice(t,1)},e.searchRestaurants=function(){var a={itemsPerPage:9,pageNumber:e.currentPage,searchText:"",filterPrice:"",filterRating:"",filterCousine:"",date:"",time:"",guests:""};t.getSearchedRestaurants(a).then(function(t){var a=t.data.restaurants,n=t.data.numberOfRestaurantPages;Object.keys(a).length?(e.notEmpty=!0,e.restaurants=a,e.numPerPage=9,e.numPages=n,e.totalItems=t.data.totalItems,e.maxSize=5):e.notEmpty=!1})},e.searchRestaurants(),e.pageChanged=function(){e.searchRestaurants()},e.dragEnd=function(){e.gmap.pos=[e.map.getCenter().lat(),e.map.getCenter().lng()],e.restaurantInfo.latitude=e.map.getCenter().lat(),e.restaurantInfo.longitude=e.map.getCenter().lng()},e.edit=function(n){t.getExtraDetails(n.id).then(function(t){console.log("test"),t=t.data,e.restaurantInfo=n,e.imageSrc.profile=n.imageFileName,e.imageSrc.cover=n.coverFileName,e.restaurantInfo.priceRange=n.priceRange,e.gmap.pos=[t.longitude,t.latitude],e.restaurantInfo.description=t.description,e.restaurantInfo.country=t.city.country.id,e.updateCities(),e.restaurantInfo.city=t.city.id,e.activeCategories=t.cousines,e.foodType=t.cousines.map(e=>e.id),a.edit=!0}),console.log("hhhhhhh"+n)},e.addRestaurant=function(){n.uploadImage(e.imageSrc.profile,function(t){e.restaurantInfo.imageFileName=t,n.uploadImage(e.imageSrc.cover,function(t){e.restaurantInfo.coverFileName=t;var n={id:e.restaurantInfo.id,name:e.restaurantInfo.restaurantName,priceRange:e.restaurantInfo.priceRange,description:e.restaurantInfo.description,avatar:e.restaurantInfo.imageFileName,cover:e.restaurantInfo.coverFileName,longitude:e.restaurantInfo.longitude,latitude:e.restaurantInfo.latitude,cityId:e.restaurantInfo.city,cousines:e.restaurantInfo.foodType};a.edit?o.editRestaurant(n).then(function(e){a.show=!0}):o.addRestaurant(n).then(function(e){a.show=!0})})})}}]).controller("AdminLocationCtrl",["$scope","$rootScope","LocationService","AdminService",function(e,t,a,n){e.currentPage=1,t.show=!0,e.location={id:"",city:"",country:""},e.searchLocations=function(){var t={itemsPerPage:9,pageNumber:e.currentPage,searchText:""};console.log("Lokacije1001"),a.getCitiesPagination(t).then(function(t){console.log("Lokacije100");var a=t.data.locations;console.log("Lokacije"+a);var n=t.data.numberOfRestaurantPages;Object.keys(a).length?(e.notEmpty=!0,e.cities=a,e.numPerPage=9,e.numPages=n,e.totalItems=t.data.totalItems,e.maxSize=5):e.notEmpty=!1})},e.searchLocations(),e.pageChanged=function(){e.searchLocations()},e.edit=function(a){e.location.city=a.city,e.location.country=a.country,t.edit=!0},e.addLocation=function(){var a={id:e.location.id,city:e.location.city,country:{country:e.location.country}};t.edit?n.editLocation(a).then(function(e){t.show=!0}):n.addLocation(a).then(function(e){t.show=!0})}}]).controller("AdminCategoriesCtrl",["$scope","$rootScope","CousineService","AdminService",function(e,t,a,n){e.currentPage=1,t.show=!1,e.cousine={id:"",name:""},e.searchCategories=function(){var t={itemsPerPage:9,pageNumber:e.currentPage,searchText:""};a.getCousinePagination(t).then(function(t){var a=t.data.cousines;console.log(a);var n=t.data.numberOfRestaurantPages;Object.keys(a).length?(e.notEmpty=!0,e.categories=a,e.numPerPage=9,e.numPages=n,e.totalItems=t.data.totalItems,e.maxSize=5):e.notEmpty=!1})},e.searchCategories(),e.pageChanged=function(){e.searchCategories()},e.edit=function(a){e.cousine.name=a.name,t.edit=!0},e.addCategory=function(){var a={name:e.cousine.name};t.edit?n.editCategory(a).then(function(e){t.show=!0}):n.addCategory(a).then(function(e){t.show=!0})}}]).controller("AdminUsersCtrl",["$scope","$rootScope","AdminService","LocationService",function(e,t,a,n){n.getCountries().then(function(t){var a=t.data;a.unshift({country:"Country",disabled:!0}),e.countries=a}),e.updateCities=function(){var t={countryId:e.info.country};n.getCities(t).then(function(t){var a=t.data;e.cities=a})},e.currentPage=1,e.users=[],t.show=!1,e.info={firstName:"",lastName:"",email:"",phone:"",country:"",city:"",type:""},e.searchUsers=function(){var t={itemsPerPage:9,pageNumber:e.currentPage,searchText:""};a.getUserPagination(t).then(function(t){var a=t.data.users;console.log(a);var n=t.data.numberOfRestaurantPages;Object.keys(a).length?(e.notEmpty=!0,e.users=a,e.numPerPage=9,e.numPages=n,e.totalItems=t.data.totalItems,e.maxSize=5):e.notEmpty=!1})},e.searchUsers(),e.pageChanged=function(){e.searchCategories()},e.edit=function(a){console.log(a),e.info={first:a.firstName,last:a.lastName,email:a.email,phone:a.phone},e.info.country=1,e.updateCities(),e.info.city=2,t.edit=!0},e.addUser=function(){var n="";n=e.userType?"admin":"user";var i={firstName:e.info.firstName,lastName:e.info.lastName,email:e.info.email,pass:e.info.pass,phone:e.info.phone,userType:n,cityId:e.info.city};t.edit?a.editUser(i).then(function(e){t.show=!0}):a.addUser(i).then(function(e){t.show=!0})}}]),angular.module("restaurantclientApp").factory("RestaurantService",["$http",function(e){return{getRestaurants:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/search",data:t,headers:{}})},getRandomRestaurants:function(){return e({method:"GET",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/random",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*","Access-Control-Allow-Headers":"*"}})},getSearchedRestaurants:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/getRestaurantsByFilter",data:t,headers:{"Content-Type":"application/json"}})},rateRestaurant:function(t,a){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/insertComment",data:t,headers:{"Content-Type":"application/json",Authorization:a}})},checkReservationAvailability:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/checkReservationAvailability",data:t,headers:{"Content-Type":"application/json"}})},makeReservation:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/makeReservation",data:t,headers:{"Content-Type":"application/json"}})},getExtraDetails:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/getExtraDetails",data:t,headers:{"Content-Type":"application/json"}})}}}]),angular.module("restaurantclientApp").factory("LoginService",["$http",function(e){return{login:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/login",data:t,headers:{"Content-Type":"application/json"}})},isAdmin:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/isAdmin",data:t,headers:{"Content-Type":"application/json"}})}}}]),angular.module("restaurantclientApp").factory("RegisterService",["$http",function(e){return{register:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/register",data:t,headers:{"Content-Type":"application/json"}})}}}]),angular.module("restaurantclientApp").factory("LocationService",["$http",function(e){return{getPopularLocations:function(){return e({method:"GET",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/popular-locations"})},getCountries:function(){return e({method:"GET",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/countries"})},getCities:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/cities",data:t,header:{"Content-Type":"application/json"}})},getCitiesPagination:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/citiesPagination",data:t,header:{"Content-Type":"application/json"}})}}}]),angular.module("restaurantclientApp").factory("SharedContext",function(){var e={value:""};return{addData:function(t){e.value=t},getData:function(){return e.value},removeData:function(){e.value=null}}}),angular.module("restaurantclientApp").factory("ReservationService",["$http",function(e){return{makeReservation:function(t,a){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/makeReservation",data:t,headers:{"Content-Type":"application/json",Authorization:a}})}}}]),angular.module("restaurantclientApp").factory("CousineService",["$http",function(e){return{getAllCousines:function(){return e({method:"GET",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/cousines"})},getCousinePagination:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/cousinesPagination",data:t,header:{"Content-Type":"application/json"}})}}}]),angular.module("restaurantclientApp").factory("FireService",function(){return{uploadImage:function(e,t){console.log(e);var a,n="_"+Math.random().toString(36).substr(2,9)+"."+e.substring(e.indexOf("/")+1,e.indexOf(";")),i=e.substring(e.indexOf(":")+1,e.indexOf(";")),s=firebase.storage().ref();(a=s.child("Images/"+n).putString(e.split(",")[1],"base64",{contentType:i})).on(firebase.storage.TaskEvent.STATE_CHANGED,function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is"+t+"%done"),e.state){case firebase.storage.TaskState.PAUSED:console.log("PAUSED");break;case firebase.storage.TaskState.RUNNING:console.log("RUNNING")}},function(e){switch(e.code){case"storage/unauthorized":t("unauthorized");break;case"storage/canceled":t("canceled");break;case"storage/unknown":t("unknown")}},function(){a.snapshot.ref.getDownloadURL().then(function(e){t(e)})})}}}),angular.module("restaurantclientApp").factory("AdminService",["$http",function(e){return{addRestaurant:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/addRestaurant",data:t,header:{"Content-Type":"application/json"}})},editRestaurant:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/editRestaurant",data:t,header:{"Content-Type":"application/json"}})},deleteRestaurant:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/deleteRestaurant",data:t,header:{"Content-Type":"application/json"}})},AddCategory:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/addCategory",data:t,header:{"Content-Type":"application/json"}})},editCategory:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/editCategory",data:t,header:{"Content-Type":"application/json"}})},deleteCategory:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/deleteCategory",data:t,header:{"Content-Type":"application/json"}})},AddLocation:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/addLocation",data:t,header:{"Content-Type":"application/json"}})},editLocation:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/editLocation",data:t,header:{"Content-Type":"application/json"}})},deleteLocation:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/deleteLocation",data:t,header:{"Content-Type":"application/json"}})},AddUser:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/addUser",data:t,header:{"Content-Type":"application/json"}})},editUser:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/editUser",data:t,header:{"Content-Type":"application/json"}})},deleteUser:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/deleteUser",data:t,header:{"Content-Type":"application/json"}})},getUserPagination:function(t){return e({method:"POST",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/usersPagination",data:t,header:{"Content-Type":"application/json"}})},getCounters:function(){return e({method:"GET",url:"https://ajdinsrestaurantsapp.herokuapp.com/app/counters"})}}}]),angular.module("restaurantclientApp").directive("ratingStars",function(){return{require:"?ngModel",restrict:"E",template:'<div ng-class="{ hover: vm.mutable, mutable: vm.mutable }" class = "stars-div"><span ng-if="vm.ratingsPosition === \'left\'" class="ratings-left">({{vm.ratings}})</span>'+[1,2,3,4,5].map(function(e){return'<i ng-mouseover="vm.mouseover('+e+')" ng-mouseout="vm.mouseout()" ng-click="vm.click()" ng-class="vm.getClass('+e+')" class="star hover material-icons"></i>'}).join("")+'<span ng-if="vm.ratingsPosition === \'right\'" class="ratings-right">({{vm.ratings}})</span></div>',scope:{ratings:"<",averageRating:"<",ratingsPosition:"@"},link:function(e,t,a,n){var i=e.vm,s=null;i.mutable=!1,i.getClass=function(e){return{on:i.averageRating>=e||s>=e,"on-half":i.averageRating>s&&i.averageRating<e&&i.averageRating>=e-.75,my:s>=e}},i.mouseover=function(e){n&&(s=e)},i.mouseout=function(){n&&(s=n.$viewValue)},i.click=function(){n&&n.$setViewValue(s)},i.mutable=!!n,n&&(n.$render=function(){s=n.$viewValue})},controller:angular.noop,controllerAs:"vm",bindToController:!0}}),angular.module("restaurantclientApp").directive("ratingDollars",function(){return{require:"?ngModel",restrict:"E",template:'<div ng-class="{ hover: vm.mutable, mutable: vm.mutable }" class = "stars-div"><span ng-if="vm.ratingsPosition === \'left\'" class="ratings-left">({{vm.ratings}})</span>'+[1,2,3,4,5].map(function(e){return'<i ng-mouseover="vm.mouseover('+e+')" ng-mouseout="vm.mouseout()" ng-click="vm.click()" ng-class="vm.getClass('+e+')" class="dollar hover material-icons"></i>'}).join("")+'<span ng-if="vm.ratingsPosition === \'right\'" class="ratings-right">({{vm.ratings}})</span></div>',scope:{ratings:"<",averageRating:"<",ratingsPosition:"@"},link:function(e,t,a,n){var i=e.vm,s=null;i.mutable=!1,i.getClass=function(e){return{on:i.averageRating>=e||s>=e,"on-half":i.averageRating>s&&i.averageRating<e&&i.averageRating>=e-.75,my:s>=e}},i.mouseover=function(e){n&&(s=e)},i.mouseout=function(){n&&(s=n.$viewValue)},i.click=function(){n&&n.$setViewValue(s)},i.mutable=!!n,n&&(n.$render=function(){s=n.$viewValue})},controller:angular.noop,controllerAs:"vm",bindToController:!0}}),angular.module("restaurantclientApp").directive("ngFileSelect",["fileReader","$timeout",function(e,t){return{scope:{ngModel:"="},link:function(a,n){n.bind("change",function(n){!function(n){e.readAsDataUrl(n,a).then(function(e){t(function(){a.$apply(function(){a.ngModel=e})})})}((n.srcElement||n.target).files[0])})}}}]).factory("fileReader",["$q",function(e){return{readAsDataUrl:function(t,a){var n=e.defer();return function(e,t){var a=new FileReader;return a.onload=function(e,t,a){return function(){a.$apply(function(){t.resolve(e.result)})}}(a,e,t),a.onerror=function(e,t,a){return function(){a.$apply(function(){t.reject(e.result)})}}(a,e,t),a.onprogress=function(e,t){return function(e){t.$broadcast("fileProgress",{total:e.total,loaded:e.loaded})}}(0,t),a}(n,a).readAsDataURL(t),n.promise}}}]),angular.module("restaurantclientApp").run(["$templateCache",function(e){e.put("views/about.html","<p>Restaurants...</p>"),e.put("views/admin.html",'<div class="container"> <uib-tabset class="adminTabs" active="activeTab"> <button ng-if="activeTab != 0" id="admin-add-btn" class="btn btn-add admin-btn" ng-click="addNewElement(activeTab); $rootScope.show=false;\n      $rootScope.edit=false;">Add {{btnValue[activeTab-1]}}</button> <uib-tab index="0" heading="Dashboard" ng-click="$rootScope.show=true"> <div ng-controller="AdminDashboardCtrl"> <div class="row"> <div class="col-xs-12 col-sm-4"> <div class="adminCards dashboard-cards"> <h2>{{counter.restaurants}}</h2> <h5>Restaurants</h5> <button class="btn btn-add admin-btn" ng-click="addNewElement(1); $rootScope.show=false">Add new restaurant</button> </div> </div> <div class="col-xs-12 col-sm-4"> <div class="adminCards dashboard-cards"> <h2>{{counter.locations}}</h2> <h5>Locations</h5> <button class="btn btn-add admin-btn" ng-click="addNewElement(2); $rootScope.show=false">Add new location</button> </div> </div> <div class="col-xs-12 col-sm-4"> <div class="adminCards dashboard-cards"> <h2>{{counter.users}}</h2> <h5>Users</h5> <button class="btn btn-add admin-btn" ng-click="addNewElement(3); $rootScope.show=false">Add new user</button> </div> </div> </div> </div> </uib-tab> <uib-tab index="1" heading="Restaurants" active="activeTab" ng-click="$rootScope.show=true"> <div ng-controller="AdminRestaurantsCtrl"> <div ng-show="$rootScope.show"> <div class="adminCards"> <table class="table table-bordered admin-tables"> <thead> <tr> <th class="col-xs-11">Name</th> <th class="col-xs-1"></th> </tr> </thead> <tbody> <tr ng-repeat="restaurant in restaurants"> <td> {{restaurant.restaurantName}}</td> <td><i class="material-icons" ng-click="edit(restaurant); $rootScope.show=false">edit</i> <i class="material-icons" ng-click="delete(restaurant)">delete</i></td> </tr> </tbody> </table> <div ng-show="notEmpty" class="pagination-sm pagination-custom" uib-pagination="" ng-model="currentPage" total-items="totalItems" items-per-page="9" ng-change="pageChanged()"> </div> </div> </div> <div ng-show="!$rootScope.show"> <form name="adminAddRestaurant" ng-submit="addRestaurant()" class="shadow-form main-admin-form"> <div class="row"> <div class="col-xs-12 col-sm-6 admin-forms"> <h3>Logo</h3> <input type="file" ng-model="imageSrc.profile" id="logoImg" ng-file-select="onFileSelect($files)" accept="image/*"> <label for="logoImg" class="upload-img" ng-show="!imageSrc.profile"> <i class="material-icons" style="font-size: 60px">cloud_upload</i> <h4>Upload logo</h4> </label> <label for="logoImg" class="upload-img" ng-show="imageSrc.profile"> <img class="uploaded-profile" src="{{imageSrc.profile}}"> </label> <h3>Name</h3> <input type="text" id="name-restaurant-input" ng-model="restaurantInfo.restaurantName"> <h3>Description</h3> <textarea name="textarea1" ng-model="restaurantInfo.description"></textarea> <h3>Location</h3> <div map-lazy-load="https://maps.google.com/maps/api/js" class="map-holder"> <ng-map center="{{gmap.center}}" zoom="10"> <marker position="{{gmap.pos}}" animation="DROP" on-dragend="dragEnd()" draggable="true"></marker> </ng-map> </div> </div> <div class="col-xs-12 col-sm-6 admin-forms"> <h3>Cover</h3> <input type="file" id="coverImg" ng-model="imageSrc.cover" ng-file-select="onFileSelect($files) accept=" image> <label for="coverImg" class="upload-img" ng-show="!imageSrc.cover"> <i class="material-icons" style="font-size: 60px">cloud_upload</i> <h4>Upload cover</h4> </label> <label for="coverImg" class="upload-img" ng-show="imageSrc.cover"> <img class="uploaded-profile" src="{{imageSrc.cover}}"> </label> <h3>Price range</h3> <select name="priceRange" class="fields" ng-model="restaurantInfo.priceRange" required> <option ng-value="1">Very low</option> <option ng-value="2">Low</option> <option ng-value="3">Medium</option> <option ng-value="4">High</option> <option ng-value="5">Very high</option> </select> <h3>Location</h3> <div class="div-fields row"> <div class="col-md-7"> <select name="country" class="fields" ng-model="restaurantInfo.country" ng-options="item.id as item.country disable when item.disabled for item in countries" ng-change="updateCities()" required> </select> <span ng-show="form.country.$touched\n            && form.country.$invalid">Country is required</span> </div> <div class="col-md-5"> <select type="text" name="city" class="fields" ng-model="restaurantInfo.city" ng-options="item.id as item.city disable when item.disabled for item in cities" required> </select> <span ng-show="form.city.$touched\n            && form.city.$invalid">City is required</span> </div> </div> <h3>Category</h3> <div class="category-frame"> <ul> <li ng-repeat="category in activeCategories"> <button class="btn btn-category" ng-click="deleteActiveCategory($index)"> {{category.name}} </button> </li> </ul> </div> <div> <select name="category" ng-model="activeCategory" ng-options="item.id as item.name disable when item.disabled for item in cousines track by item.name" ng-change="addCategory(activeCategory)"></select> </div> </div> </div> <input type="submit" class="btn admin-btn proceed-btn" value="Add restaurant"> <button ng-click="$rootScope.show = true" class="btn back-btn">Back</button> </form> </div> </div> </uib-tab> <uib-tab index="2" heading="Locations" active="activeTab" ng-click="$rootScope.show=true"> <div ng-controller="AdminLocationCtrl"> <div ng-show="$rootScope.show"> <div class="adminCards"> <table class="table table-bordered admin-tables"> <thead> <tr> <th class="col-xs-11">Name</th> <th class="col-xs-1"></th> </tr> </thead> <tbody> <tr ng-repeat="city in cities"> <td> {{city.city}}</td> <td><i class="material-icons" ng-click="edit(city); $rootScope.show=false">edit</i> <i class="material-icons" ng-click="delete(city)">delete</i></td> </tr> </tbody> </table> <div ng-show="notEmpty" class="pagination-sm pagination-custom" uib-pagination="" ng-model="currentPage" total-items="totalItems" items-per-page="9" ng-change="pageChanged()"> </div> </div> </div> <div ng-show="!$rootScope.show"> <form name="adminAddLocation" ng-submit="addLocation()" class="shadow-form main-admin-form"> <div class="row"> <div class="col-xs-12 col-sm-6 admin-forms"> <input type="text" ng-model="location.city" placeholder="New/existing country name"> </div> <div class="col-xs-12 col-sm-6 admin-forms"> <input type="text" ng-model="location.country" placeholder="New city name"> </div> </div> <input type="submit" class="btn admin-btn proceed-btn" value="Add location"> <button ng-click="$rootScope.show = true" class="btn back-btn">Back</button> </form> </div> </div> </uib-tab> <uib-tab index="3" heading="Categories" active="activeTab" ng-click="$rootScope.show=true"> <div ng-controller="AdminCategoriesCtrl"> <div ng-show="$rootScope.show"> <div class="adminCards"> <table class="table table-bordered admin-tables"> <thead> <tr> <th class="col-xs-11">Name</th> <th class="col-xs-1"></th> </tr> </thead> <tbody> <tr ng-repeat="category in categories"> <td> {{category.name}}</td> <td><i class="material-icons" ng-click="edit(category); $rootScope.show=false">edit</i> <i class="material-icons" ng-click="delete(category)">delete</i></td> </tr> </tbody> </table> <div ng-show="notEmpty" class="pagination-sm pagination-custom" uib-pagination="" ng-model="currentPage" total-items="totalItems" items-per-page="9" ng-change="pageChanged()"> </div> </div> </div> <div ng-show="!$rootScope.show"> <form name="adminAddCategory" ng-submit="addCategory()" class="shadow-form main-admin-form"> <div class="row"> <div class="col-xs-12 col-sm-6 admin-forms"> <input type="text" ng-model="cousine.name" placeholder="New cousine"> </div> </div> <input type="submit" class="btn admin-btn proceed-btn" value="Add location"> <button ng-click="$rootScope.show = true" class="btn back-btn">Back</button> </form> </div> </div> </uib-tab> <uib-tab index="4" heading="Users" active="activeTab" ng-click="$rootScope.show=true"> <div ng-controller="AdminUsersCtrl"> <div ng-show="$rootScope.show"> \x3c!-- DODATI BUTTON--\x3e <div class="adminCards"> <table class="table table-bordered admin-tables"> <thead> <tr> <th class="col-xs-5">Name</th> <th class="col-xs-6 th-email">Address</th> <th class="col-xs-1"></th> </tr> </thead> <tbody> <tr ng-repeat="user in users"> <td> {{user.firstName}} </td> <td class="td-email"> {{user.email}} </td> <td><i class="material-icons" ng-click="edit(user); $rootScope.show=false">edit</i> <i class="material-icons" ng-click="delete(user)">delete</i></td> </tr> </tbody> </table> </div> </div> <div ng-show="!$rootScope.show"> <form name="adminAddUser" ng-submit="addUser()" class="shadow-form main-admin-form"> <div class="row"> <div class="div-fields"> <input type="text" name="first" class="fields" id="first" placeholder="First Name" ng-model="info.first" required> <span ng-show="form.first.$touched\n            && form.first.$invalid">First Name is required</span> </div> \x3c!--last name--\x3e <div class="div-fields"> <input type="text" name="last" class="fields" name="last" placeholder="Last Name" ng-model="info.last" required> <span ng-show="form.last.$touched\n            && form.last.$invalid">Last Name is required</span> </div> \x3c!--email--\x3e <div class="div-fields"> <input type="email" name="email" class="fields" id="email" placeholder="Email" ng-model="info.email" required> <span ng-show="form.email.$touched\n            && form.email.$invalid">Email is not valid</span> </div> \x3c!--Phone Number--\x3e <div class="div-fields"> <input type="text" name="phone" class="fields" id="phone" placeholder="Phone Number" ng-model="info.phone" required> <span ng-show="form.phone.$touched\n            && form.phone.$invalid">Phone Number is required</span> </div> \x3c!--country & city --\x3e <div class="div-fields row"> <div class="col-md-7"> <select name="country" class="fields" ng-model="info.country" ng-options="item.id as item.country disable when item.disabled for item in countries" ng-change="updateCities()" required> </select> <span ng-show="form.country.$touched\n            && form.country.$invalid">Country is required</span> </div> <div class="col-md-5"> <select type="text" name="city" class="fields" ng-model="info.city" ng-options="item.id as item.city disable when item.disabled for item in cities" required> </select> <span ng-show="form.city.$touched\n            && form.city.$invalid">City is required</span> </div> </div> <div class="div-fields"> <input type="checkbox" ng-model="userType"> <p id="admin-cb">Admin</p> </div> </div> <input type="submit" class="btn admin-btn proceed-btn" value="Add user"> <button ng-click="$rootScope.show = true" class="btn back-btn">Back</button> </form> </div> </div> </uib-tab></uib-tabset></div>   '),e.put("views/footer.html",'<div class="container"> <div class="row footer-elements"> <ul> <li>Privacy Policy</li> <li>Terms of use</li> <li>Sitemap</li> <li>Mobile Site</li> </ul> <ul> <li>About Us</li> <li>Blog</li> <li>Careers</li> <li>Press</li> <li>Advertise</li> </ul> <ul> <li>Copyright &#160 2016 All rights reserved.</li> </ul> </div> </div>'),e.put("views/header.html",'<div class="navbar navbar-default navbar-custom" role="navigation"> <div class="container"> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed colapse-custom" data-toggle="collapse" data-target="#js-navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#/">AppName</a> </div> <div class="collapse navbar-collapse colapse-custom" id="js-navbar-collapse" ng-controller="LogoutCtrl"> <ul class="nav navbar-nav nav-custom"> <li><a href="#/home">Home</a></li> <li><a ng-href="#/search">Restaurants</a></li> <li><a ng-href="#/admin" ng-if="$root.isAdmin">Admin</a></li> <li><a ng-href="#/login" ng-if="!isAuthenticated">Login</a> <a ng-href="#/home" ng-click="logout()" ng-if="isAuthenticated">Log Out</a></li> </ul> </div> </div> </div>'),e.put("views/home.html",'\x3c!-- Search restourants --\x3e <div class="image-background text-center"> <div class="content"> <p>Make a free reservation</p> <p>Choose your table from n restaurants near you</p> <form class="form-horizontal form-search" ng-controller="HomeCtrl" ng-submit="search()"> <div class="col-sm-4 input-holder guests-div"><i class="material-icons search loop">search</i><input ng-model="reservation.nameRes" type="text" placeholder="Location, Restaurant or Cousine" required></div> <div class="col-sm-2 input-holder guests-div"><i class="material-icons search">person</i><input ng-model="reservation.numGuests" type="number" min="1" placeholder="Guests" required></div> <div class="col-sm-2 input-holder"><md-datepicker class="datepicker" ng-model="reservation.date" md-hide-icons="triangle" md-placeholder="Insert Date" md-min-date="todayDate" required></md-datepicker></div> <div class="col-sm-2 input-holder"><div class="timepicker-default" uib-timepicker ng-model="reservation.time" hour-step="1" minute-step="30" show-meridian="false" show-spinners="false" required></div></div> <div class="col-sm-2 input-holder"><input type="submit" value="Find a table"></div> </form> </div> </div> \x3c!-- Random restourants --\x3e <div class="container random-restaurants-container" ng-controller="RestCtrl as vm"> <div class="header-home text-center">Popular for Lunch Today</div> <div class="col-md-4 col-sm-6 col-xs-12 text-margin-random-restaurant" ng-repeat="item in restaurants"> <div class="random-restaurant-content" id="{{$index}}"> <img class="img-rand img-responsive" ng-src="{{item.imageFileName}}"> <div class="random-restaurant-name">{{item.restaurantName}}</div>\x3c!--item.name/rate/price--\x3e <div class="rating-range"> <rating-stars ratings="vm.ratings[$index]" average-rating="vm.averageRating[$index]" ratings-position="{{vm.ratingsPosition}}"> </rating-stars></div> <div class="dollar-range"> <rating-dollars ratings="1" average-rating="vm.averageRatingDollar[$index]" ratings-position=""> </rating-dollars></div> <div class="random-restaurant-name search-food-type">{{item.foodType}}</div> <input type="submit" value="Reserve Now" ng-click="viewRestaurant($event)"> </div> \x3c!--cousines--\x3e </div> </div> \x3c!-- Specials / hardcoded --\x3e <div class="div-noodles" ng-controller="fakeSpecialsCtrl"> <div class="noodles-title">Specials</div> <div uib-carousel class="carousel-custom" active="0"> <div uib-slide ng-repeat="meal in meals" index="$index"> <div class="col-sm-4 specials-object"> <div class="random-restaurant-content"> <img class="specials-img" ng-src="{{meal.img}}"> <h1>{{meal.title}}</h1> <p>{{meal.city}} | {{meal.numRes}}</p> </div> </div> <div class="col-sm-4 specials-object"> <div class="random-restaurant-content"> <img class="specials-img" ng-src="{{meals[getSecondIndex($index+1)].img}}"> <h1>{{meals[getSecondIndex($index+1)].title}}</h1> <p>{{meals[getSecondIndex($index+1)].city}} | {{meals[getSecondIndex($index+1)].numRes}}</p> </div> </div> <div class="col-sm-4 specials-object"> <div class="random-restaurant-content"> <img class="specials-img" ng-src="{{meals[getSecondIndex($index+2)].img}}"> <h1>{{meals[getSecondIndex($index+2)].title}}</h1> <p>{{meals[getSecondIndex($index+2)].city}} | {{meals[getSecondIndex($index+2)].numRes}}</p> </div> </div> </div> </div> </div> \x3c!-- Locations / hardcoded --\x3e <div class="container locations" ng-controller="LocationCtrl"> <div class="text-center popular-locations-title">Popular locations</div> <div class="col-md-3 col-sm-4 col-xs-6 random-restaurant-content" ng-repeat="location in locations"> <div class="location-content"> <div class="loc-city-name">{{location.city}}</div> <div class="loc-restaurant-number">{{location.restaurantNum}} restaurants</div> </div> </div> </div>'),e.put("views/login.html",'<div class="gray-background row center-block"> <form name="form" ng-submit="loginFun()" role="form" class="validation-form"> <div class="error-div" ng-if="error">{{error}}</div> <div class="col-md-6 login-text-div">Login</div> <div class="col-md-6 text-right register-link-div"> <a ng-href="#/register" class="register-link">Create  Account</a></div> <div class="div-fields"> <input type="email" name="email" class="fields" id="email" placeholder="Email" ng-model="credentials.email" required> <span ng-show="form.email.$touched\n            && form.email.$invalid">Email is not valid</span> </div> <div class="div-fields"> <input type="password" class="fields" name="pass" id="pass" placeholder="Password" ng-model="credentials.pass" required> <span ng-show="form.pass.$touched\n            && form.pass.$invalid">Password is required</span> </div> <div class="div-btn-login"> <input type="submit" class="btn-login" ng-disabled="form.$invalid || credentials.dataLoading" value="Login"> </div> </form> </div>'),e.put("views/main.html",'<div class="jumbotron"> <h1>\'Allo, \'Allo!</h1> <p class="lead"> <img src="images/yeoman.c582c4d1.png" alt="I\'m Yeoman"><br> Always a pleasure scaffolding your apps. </p> <p><a class="btn btn-lg btn-success" ng-href="#/">Splendid!<span class="glyphicon glyphicon-ok"></span></a></p> </div> <div class="row marketing"> <h4>HTML5 Boilerplate</h4> <p> HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites. </p> <h4>Angular</h4> <p> AngularJS is a toolset for building the framework most suited to your application development. </p> <h4>Karma</h4> <p>Spectacular Test Runner for JavaScript.</p> </div>'),e.put("views/register.html",'<div class="gray-background row center-block container" ng-controller="RegisterCtrl"> <form name="form" ng-submit="registerFun()" role="form" class="validation-form"> <div class="error-div" ng-if="error">{{error}}</div> <div class="col-md-6 login-text-div">Create Account</div> <div class="col-md-6 text-right register-link-div"> <a href="#/login" class="register-link">Login</a></div> \x3c!--first name--\x3e <div class="div-fields"> <input type="text" name="first" class="fields" id="first" placeholder="First Name" ng-model="info.first" required> <span ng-show="form.first.$touched\n            && form.first.$invalid">First Name is required</span> </div> \x3c!--last name--\x3e <div class="div-fields"> <input type="text" name="last" class="fields" name="last" placeholder="Last Name" ng-model="info.last" required> <span ng-show="form.last.$touched\n            && form.last.$invalid">Last Name is required</span> </div> \x3c!--email--\x3e <div class="div-fields"> <input type="email" name="email" class="fields" id="email" placeholder="Email" ng-model="info.email" required> <span ng-show="form.email.$touched\n            && form.email.$invalid">Email is not valid</span> </div> \x3c!--Phone Number--\x3e <div class="div-fields"> <input type="text" name="phone" class="fields" id="phone" placeholder="Phone Number" ng-model="info.phone" required> <span ng-show="form.phone.$touched\n            && form.phone.$invalid">Phone Number is required</span> </div> \x3c!--country & city --\x3e <div class="div-fields row"> <div class="col-md-7"> <select name="country" class="fields" ng-model="info.country" ng-options="item.id as item.country disable when item.disabled for item in countries" ng-change="updateCities()" required> </select> <span ng-show="form.country.$touched\n            && form.country.$invalid">Country is required</span> </div> <div class="col-md-5"> <select type="text" name="city" class="fields" ng-model="info.city" ng-options="item as item.city disable when item.disabled for item in cities" required> </select> <span ng-show="form.city.$touched\n            && form.city.$invalid">City is required</span> </div> </div> \x3c!--pass--\x3e <div class="div-fields"> <input type="password" class="fields" name="pass" id="pass" placeholder="Password" ng-model="info.pass" required> <span ng-show="form.pass.$touched\n            && form.pass.$invalid">Password is required</span> </div> \x3c!--confirm pass--\x3e <div class="div-fields"> <input type="password" class="fields" name="passConf" id="passConf" placeholder="Confirm Password" ng-model="info.passConf" required> <span ng-show="form.passConf.$touched\n            && info.passConf!=info.pass" class="password-match">Your password and confirmation password do not match.</span> </div> <div class="div-btn-login"> <input type="submit" class="btn-login" ng-disabled="form.$invalid || info.dataLoading" value="Create Account"> </div> </form> </div>'),e.put("views/reservation.html",'<h1 class="complete-reservation-txt">Complete your reservation</h1> <div> <form name="reservation-form" ng-submit="makeReservation()" ng-controller="ReservationCtrl"> <div class="reservation-details"> <div class="container"> <div class="row"> <div class="col-md-3"> <h2 class="details-reservation">Reservation details</h2> <img class="profile-image" ng-src="{{restaurant.imageFileName}}"> </div> <div class="col-md-4 move-col-below"> <h3 class="details-titles">RESTAURANT</h3> <p class="reservation-restaurant-name">{{restaurant.restaurantName}}</p> <h3 class="details-titles">GUESTS</h3> <p class="reservation-other">{{reservation.numGuests}}</p> </div> <div class="col-md-5 move-col-below"> <h3 class="details-titles">DATE</h3> <p class="reservation-other">{{reservation.date | date: \'dd/MM/yyyy\'}}</p> <h3 class="details-titles">TIME</h3> <p class="reservation-other">{{reservation.time}}</p> </div> </div> </div> </div> <input class="complete-reservation-btn" type="submit" value="Complete Reservation"> </form> </div> <p ng-if="!isAuthenticated">Log in to complete reservation!</p>'),e.put("views/restaurant.html",'<div class="cover-image"> <div class="content-profile"> </div> <div class="container profile-container" ng-controller="RestaurantCtrl as vm"> <div class="row"> <div class="col-md-3 hidden-xs hidden-sm"> <div class="random-restaurant-content"> <img class="profile-image" ng-src="{{restaurant.imageFileName}}"> <div class="list-group"> <a class="list-group-item">Reservation</a> <a class="list-group-item">About</a> <a class="list-group-item">Menu</a> <a class="list-group-item">Galery</a> </div> </div> </div> <div class="col-md-9"> <div class="profile-main"> <div id="header-name"><p>{{restaurant.restaurantName}}</p></div> <ul class="restaurant-info"> <rating-stars ratings="vm.ratings" average-rating="vm.averageRating" ratings-position="{{vm.ratingsPosition}}"> </rating-stars> \x3c!--li>{{restaurant.priceRange}}</li--\x3e <li class="food-type-restaurant">{{restaurant.foodType}}</li> </ul> <div class="review-btn"><button class="btn" type="submit" ng-click="review()"><i class="material-icons">star</i> <span>Rate this place</span></button></div> </div> \x3c!-- main part--\x3e <div class="profile-reservation"> <div class="container profile-filter-reservation"> <p>Make a free reservation</p> <form class="form-horizontal" ng-submit="findTables()"> <div class="row"> <div class="col-sm-3 input-holder guests-div"><i class="material-icons search">person</i><input ng-model="reservation.numGuests" type="number" min="1" placeholder="Guests" onfocus="isCollapsed=true" required></div> <div class="col-sm-3 input-holder"> <md-datepicker ng-model="reservation.date" md-hide-icons="triangle" md-placeholder="Insert Date" onfocus="isCollapsed=true" md-open-on-focus="true" md-min-date="todayDate" required></md-datepicker></div> <div class="col-sm-3 input-holder"><div class="timepicker-default" uib-timepicker ng-model="reservation.time" hour-step="1" minute-step="30" show-meridian="false" show-spinners="false" onfocus="isCollapsed=true" required></div> </div> <div class="col-sm-3 input-holder"> <input type="submit" value="Find a table" ng-click="isCollapsed = false"> </div> <div uib-collapse="isCollapsed"> <div class="collapsing-part"> <div class="availability-text"> Availability on {{reservation.date | date:\'MMM\'}} {{reservation.date | date:\'dd\'}}, {{reservation.date | date:\'yyyy\'}} around {{reservation.time | date:\'HH:mm\'}} for {{reservation.numGuests}} people: </div> <div class="collapsed-tables"> <i class="material-icons">restaurant</i> <p>{{tablesLeft}} tables left</p> </div> <div class="time-pick-table"> Select the best time that fits you: </div> <div class="col-xs-2" ng-repeat="times in reservations"> <div id="{{$index}}"> <input type="submit" class="reservation-btns" value="{{times.bestTime}}" ng-click="confirmReservation(times)"> </div> </div> </div> </div> </div> </form> </div> </div> \x3c!-- Map --\x3e <div class="profile-reservation div-map"> <h1>About {{restaurant.restaurantName}}</h1> <div map-lazy-load="https://maps.google.com/maps/api/js" class="map-holder"> <ng-map center="[43.8563, 18.4131]" zoom="10"> <marker position="[43.8563, 18.4131]"></marker> </ng-map> </div> <h2>Description</h2> <p>{{restaurant.description}}</p> </div> \x3c!-- Menu --\x3e <div class="profile-reservation"> <div class="restaurant-content"> <h3>Menu: </h3> <uib-tabset class="tabbable"> <uib-tab heading="Breakfast" ng-attr-active="tabs[0].active"> neki tekst </uib-tab> <uib-tab heading="Lunch" ng-attr-active="tabs[1].active"> neki tekst 2 </uib-tab> <uib-tab heading="Dinner" ng-attr-active="tabs[2].active"> neki tekst 3 </uib-tab> </uib-tabset> <div class="fade"></div> <input type="submit" ng-click="showMenu()" ng-style="{\'max-height\': \'{{heightMenu}}px\'}" value="{{btnShowMenu}}"> </div> </div> \x3c!-- Galery --\x3e </div> </div> <script id="rateRestaurant.html" type="text/ng-template" bindtocontroller="true"><form name="formModal" ng-submit="rateRestaurant()" role="form" class="validation-form">\n        <div class="modal-header">Rate this place</div>\n        <div class="modal-stars"><rating-stars ng-model="formData.myRating" ng-change="ratingChange()"\n                           ratings="0" average-rating="0" ratings-position=""></rating-stars></div>\n        <div class="modal-review-input"><textarea ng-model="comment" placeholder="Write a review"></textarea></div>\n        <input type="submit" value="Save">\n      </form><\/script> </div> </div>'),e.put("views/search.html",'<div ng-controller="SearchCtrl as vm"> <form class="form-horizontal form-search custom-form-search" ng-submit="searchHandler()"> <div class="shadow-form"> <div class="col-sm-8 input-holder guests-div"><i class="material-icons search loop">search</i> <input ng-model="reservation.nameRes" type="text" placeholder="Location, Restaurant or Cousine"></div> <div class="col-sm-2 input-holder"> <div class="btn-group" uib-dropdown is-open="status.isopen"> <button id="single-button" type="button" class="btn" uib-dropdown-toggle ng-disabled="disabled"> Filter by <span class="caret"></span> </button> <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button"> <li role="menuitem"> <ul class="list-inline"> <li> <ul class="list-unstyled"> <li> <h2>PRICE</h2> </li> <li> <rating-dollars ng-model="formData.priceRange" ng-change="priceChange()" ratings="0" average-rating="0" ratings-position=""></rating-dollars> </li> </ul> </li> <li class="filter-snd-col"> <ul class="list-unstyled"> <li> <h2>RATING</h2> </li> <li> <rating-stars ng-model="formData.myRating" ng-change="ratingChange()" ratings="0" average-rating="0" ratings-position=""></rating-stars> </li> </ul> </li> </ul> </li><li role="menuitem"> </li><li class="divider"></li> <li class="filter-snd-col"> <h2>COUSINE</h2> <select ng-model="filterCousine" id="filter-cousine" multiple><option class="col-sm-6 options-cousine" ng-repeat="cousine in cousines" value="{{$index+1}}">{{cousine}}</option> </select> </li>  </ul> </div> </div> <div class="col-sm-2 input-holder"><input type="submit" value="Search"></div> </div> </form> \x3c!-- Searched restourants --\x3e <div class="container random-restaurants-container"> <div ng-show="noFilter" uib-alert class="search-alert" close="closeAlert()">Showing reasults for restaurants available on {{params.date | date:\'dd/MM/yyyy\'}} at {{params.time | date:\'hh:mm\'}} for {{params.guests}} people</div> <div ng-show="notEmpty" class="col-md-4 col-sm-6 col-xs-12 text-margin-random-restaurant" ng-repeat="item in restaurants"> <div class="random-restaurant-content" id="{{$index}}"> <img class="img-rand img-responsive" ng-src="{{item.imageFileName}}"> <div class="random-restaurant-name">{{item.restaurantName}}</div>\x3c!--item.name/rate/price--\x3e <div class="rating-range"> <rating-stars ratings="vm.ratings[$index]" average-rating="vm.averageRating[$index]" ratings-position="{{vm.ratingsPosition}}"> </rating-stars></div> <div class="dollar-range"> <rating-dollars ratings="1" average-rating="vm.averageRatingDollar[$index]" ratings-position=""> </rating-dollars></div> <div class="random-restaurant-name search-food-type">{{item.foodType}}</div> <input type="submit" value="Reserve Now" ng-click="viewRestaurant($event)"> </div> \x3c!--cousines--\x3e </div> <div class="no-results-msg" ng-show="!notEmpty"><p>There are no results matching your search</p></div> </div> <div ng-show="notEmpty" class="pagination-sm pagination-custom" uib-pagination="" ng-model="currentPage" total-items="totalItems" items-per-page="9" ng-change="pageChanged()"> </div> </div> \x3c!-- Locations / hardcoded --\x3e <div class="container locations" ng-controller="LocationCtrl"> <div class="text-center popular-locations-title">Popular locations</div> <div class="col-md-3 col-sm-4 col-xs-6 random-restaurant-content" ng-repeat="location in locations"> <div class="location-content"> <div class="loc-city-name">{{location.city}}</div> <div class="loc-restaurant-number">{{location.restaurantNum}} restaurants</div> </div> </div> </div>')}]);